<% content_for :title do %>
    <% "OpenSplitTime: Show race - #{@race.name}" %>
<% end %>
<div class="row">
  <div class="col-xs-8">
    <h2><%= @race.name %></h2>
  </div>
</div>
<div class="row">
  <div class="col-xs-6">
    <%= @race.description %>
  </div>
</div>

<hr>
<div class="row">
  <div class="col-xs-8">
    <%= link_to '<< Show All Races', races_path, class: "btn btn-sm btn-default" %>
    <%= link_to '< Back', :back, class: "btn btn-sm btn-default" %>
    <% if @current_user && @current_user.authorized_to_edit?(@race) %>
        <%= link_to 'Edit this race', edit_race_path(@race), class: "btn btn-sm btn-primary" %>
        <%= link_to 'Add/remove stewards', stewards_race_path(@race), class: "btn btn-sm btn-warning" %>
        <%= link_to 'Delete this race',
                    race_path(@race, referrer_path: request.referrer ? URI(request.referrer).path : locations_path),
                    method: :delete,
                    data: {confirm: "Are you sure?"}, class: "btn btn-sm btn-danger" %>
    <% end %>
  </div>
</div>
<hr>

<% if @current_user && @current_user.authorized_to_edit?(@race) %>
    <div class="article-actions">
      <%= link_to 'Create New Event', new_event_path(race_id: @race.id), class: "btn btn-sm btn-success" %>
    </div>
    <hr>
<% end %>

<% if @race_events.pluck(:id).count > 0 %>
    <div class="row">
      <div class="col-xs-8">
        <h4>Events associated with this race:</h4>
      </div>
    </div>
    <%= render 'events/events', events: @race_events %>
<% end %>